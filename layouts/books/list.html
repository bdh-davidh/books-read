{{ define "main" }}

<!-- Create an array item for each year -->
{{ $years := slice }}
{{ range .Pages }}
  {{ $year := slicestr .Date 0 4 }}
  {{ $years = $years | append $year }}
{{ end }}
{{ $uniqueYears := $years | uniq }}

<h1>Books Read by Year</h1>
<!-- Show the books read for each year -->
  {{ range $uniqueYears }}
<div class="flow-content">
  <h2 id="{{ . }}"> {{- . -}} </h2>
  {{ $uniqueYear := .}}
  <ul role="list" class="flow-content">
    {{ range $.Pages }}
    {{ if eq (slicestr .Date 0 4) $uniqueYear }}
    <li class="book-list" style="--star-size: 1rem">
      {{ partial "bookcover.html" . }}
      <div class="book-content flow-content" style="">
        <h3><a href="{{ .Permalink }}">{{- .Title -}}</a></h3>
        <p>{{- .Params.review -}}</p>
        {{ partial "rating.html" . }}
      </div>
    </li>

    {{ end }}
    {{ end }}
  </ul>
</div>
  {{ end }}

{{ end }}


