{{ define "main" }}

<!-- Create an array item for each year -->
{{ $years := slice }}
{{ range .Pages }}
  {{ $year := slicestr .Date 0 4 }}
  {{ $years = $years | append $year }}
{{ end }}
{{ $uniqueYears := $years | uniq }}

<h1>Books Read by Year</h1>
<!-- Show the books read for each year -->
  {{ range $uniqueYears }}
<h2> {{ . }} </h2>
  {{ $uniqueYear := .}}
  <ul>
    {{ range $.Pages }}
      {{ if eq (slicestr .Date 0 4) $uniqueYear }}
        <li>
          <a href="{{ .Permalink }}">{{ .Title }}</a>
        </li>
      {{ end }}
    {{ end }}
  </ul>
  {{ end }}

{{ end }}


